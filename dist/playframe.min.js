!function(e,r){"object"==typeof exports&&"undefined"!=typeof module?r(exports):"function"==typeof define&&define.amd?define(["exports"],r):r((e=e||self).PlayFrame={})}(this,function(e){"use strict";var r,t,n,a,l,o;a=(e=>r=>{var t,n;return t=!1,n=(e=>(t=!1,r(e))),()=>{t||(t=!0,e(n))}}),t=(e=>r=>t=>{e(),r.push(t)}),r=(e=>r=>{var t;return t=e(),()=>{var n;return r({delta:(n=e())-t,ts:t=n})}}),n=(e=>r=>{var t,n,a,l;for(n=0;n<(a=r.length);)try{for(;n<a;)r[n++](e)}catch(e){t=e,console.error(t),(l=r[n-1].r)&&l(t)}r.length=0}),({isArray:o}=Array);var u,i,s,f,c,h=l=((e,r)=>{var t,n,a,u;for(n in t={...e},r)a=typeof(u=r[n]),t[n]="function"===a?u(e[n]):"object"!==a||o(u)?u:l(e[n],u);return t}),d={}.hasOwnProperty;({assign:u,create:i,keys:f}=Object),s=(e=>"function"==typeof e);var v,p,y=c=((e,r,t)=>{var n,a,l,o,f,h,v,p,y,m,b,g,E,k;for(p in f=e._,l=e,a=!1,n=y=(()=>n=y),h=(e=>{n=(r=>()=>{r(),e()})(n),b()}),e)(k=e[p])._&&(l[p]=c(k,h,(e=>r=>l[e]=r)(p)));for(p in m=(e=>(b(),l=e)),b=(()=>{a||(a=!0,r(g))}),g=(()=>{var e;for(p in a=!1,e=l,l=i(null),e)l[p]=e[p];n(),t(l)}),l._=E=(e=>s(e)?v(e):e?m(u(i(l),e)):l),v=(e=>r=>{var t,n,a;for(p in t=i(l),a=e(r,t),t)if(d.call(t,p)){n=!0,m(t);break}return s(a)?v(a):(!a||n||a===t||a.then||m(u(t,a)),a)}),f)o=f[p],E[p]=v(o);return l});v=h,p=y;var m,b,g,E;m=Symbol("VNODE"),b={};var k,_,A,S,w,N,x,T,O,j,C,D,L,P,V,K,M,W,q,F,H=g=((...e)=>{var r,t;return"function"==typeof(t=e[0])?E(...e):(r=b[t])?(e[0]=r,E(...e)):(e[m]=!0,e)});g.VNODE=m,g.use=(e=>{var r,t;for(r in e)t=e[r],b[r]=t}),E=((e,r,...t)=>{var n,a,l,o;if(t[0])for(a=r.children=[],l=0,o=t.length;l<o;l++)!(n=t[l])[m]&&Array.isArray(n)?a.push(...n):a.push(n);return e(r)}),({VNODE:S}=C=H),({isArray:D}=Array),x=document,k=Symbol("ELEMENT"),_=Symbol("EVENTS"),A=Symbol("KEYED"),N=null,w=!0,O=(e=>{var r;r=e.currentTarget[_][e.type],N.next(()=>r(e))});W=((e,r)=>{var t,n,a,l,o,u;if(r=e.namespaceURI||r,3===e.nodeType)return e.nodeValue;for(u=C(e.nodeName.toLowerCase(),null),({childNodes:t}=(o=e.shadowRoot)?(u.patch=K(u,e,o,r),o):e),n=a=0,l=t.length;a<l;n=a+=1)u.push(W(t[n]));return u}),V=((e,r,t,n,a)=>{var l,o,u,i;if(t!==n)if(null==n||null==t||n[S]||t[S]){if(a=t&&(null!=(i=t[1])?i.xmlns:void 0)||a,null==t||null==n||n[0]!==t[0])return null!=t&&(l=L(t,a),e.insertBefore(l,r)),null!=n&&(M(e,r),N.next(()=>T(n))),l;(u=n.patch)?(t.patch=u,u(t)):(F(r,t[1],n[1],a),P(r,t,n,a)),(o=t[1]&&t[1][w?"oncreate":"onupdate"])&&o(r)}else r.nodeValue=t;return r}),P=((e,r,t,n)=>{var a,l,o,u,i,s,f,c,h,d,v,p,y,m,b,g,E,_,w,x,O,C;for(i=s=2,_=x=w=O=u=0,d=r.length,v=(null!=t?t.length:void 0)||0,a=!1;;){for(;i<=d;)if(null==(l=r[i])||!0===l||!1===l)i++;else{if(l[S]||!D(l)){i++;break}if(w||(w=l.length),null!=(E=l[_])&&!0!==E&&!1!==E){_++,l=E;break}_<w?_++:(_=w=0,i++)}for(c=j(l);s<=v;)if(y=null,null==(p=t[s])||!0===p||!1===p)s++;else if(p[S]||!D(p)){if(s++,y=j(p),!m||!y||m[y])break}else if(O||(O=p.length),null!=(E=p[x])&&!0!==E&&!1!==E){if(x++,y=j(p=E),!m||!y||m[y])break}else x<O?x++:(x=O=0,s++);if(!l&&!p)break;o=e.childNodes[u],a||!c&&!y||(a=!0,m=t&&t[A],h=r[A]=Object.create(null)),m&&l&&y!==c?(b=(g=m[c])?V(e,g[k],l,g,n):L(l,n),e.insertBefore(b,o),p&&(M(e,o),y?N.render((e=>()=>{if(m[e])return T(m[e])})(y)):T(p)),o=b):o=V(e,o,l,p,n),null!=l&&(u++,c&&(l[k]=o,h[c]=l,m&&(m[c]=null)))}if(m)for(f in m)(C=m[f])&&(h[f]=C)}),L=((e,r)=>{var t,n,a,l;return e[S]?(t=r?x.createElementNS(r,e[0]):x.createElement(e[0]),F(t,e[1],null,r),(l=e[1]&&e[1].attachShadow)?(a=t.attachShadow(l),e.patch=K(e,t,a,r),P(a,e,null,r)):P(t,e,null,r),(n=e[1]&&e[1].oncreate)&&n(t),t):x.createTextNode(e)}),M=((e,r)=>{e.removeChild(r)}),T=(e=>{var r,t,n;for(({length:t}=e);t-- >0;)D(r=e[t])&&T(r);(n=e[1]&&e[1].onremove)&&n()}),F=((e,r,t,n)=>{var a,l,o;for(a in t)l=t[a],r&&null!=r[a]||q(e,a,null,l,n);for(a in r)(o=r[a])!==(l="value"===a||"checked"===a?e[a]:t&&t[a])&&q(e,a,o,l,n)}),q=((e,r,t,n,a)=>{var l,o,u,i;if("key"===r||"attachShadow"===r);else if("style"===r)if(u=e[r],"string"==typeof t)u.cssText=t;else{if("string"==typeof n)u.cssText="";else for(o in t={...t},n)null==t[o]&&(t[o]="");for(o in t)i=t[o],45===o.charCodeAt(0)?u.setProperty(o,i):u[o]=i}else 111===r.charCodeAt(0)&&110===r.charCodeAt(1)?(r=r.slice(2),l=e[_]||(e[_]={}),n||(n=l[r]),l[r]=t,t?n||e.addEventListener(r,O):e.removeEventListener(r,O)):r in e&&"list"!==r&&"type"!==r&&"draggable"!==r&&"spellcheck"!==r&&"translate"!==r&&!a?e[r]=null!=t?t:t="":null!=t&&!1!==t?e.setAttribute(r,t):e.removeAttribute(r)}),j=(e=>e&&e[1]&&e[1].key),K=((e,r,t,n)=>a=>{a!==e&&(F(r,a[1],e[1],n),P(t,a,e,n),e=a)});var B,I,R,U,Y,$,z,G,J,Q,X,Z,ee,re,te,ne,ae,le,oe,ue,ie,se="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};ee=se.document,I=Symbol("NAMED"),R=Symbol("WILD"),B=Symbol("LEAF"),re=new WeakMap,X=null,J=null,z=null,G=null,Y=null,Q=!1,U=(()=>404),$=(()=>Y=U);var fe,ce,he,de,ve,pe=e=>(X=e,(e,r)=>{var t;return J=e,({href:t}=r||(r=location)),!Q&&ee&&(ue(),Q=!0),t!==z&&oe(r),e._.push||Z(),G.state=e,Y(G)});Z=(()=>{var e;e=(()=>X.next(()=>{oe(location),J._({}),X.frame(()=>scrollTo(0,0))})),J._.push=(r=>{history.replaceState({height:document.body.clientHeight},""),history.pushState({},"",r),e()}),J._.replace=(r=>{history.replaceState({},"",r),e()})}),ue=(()=>{ee.addEventListener(ee.ontouchstart?"touchstart":"click",e=>{var r;for(r=("function"==typeof e.composedPath?e.composedPath()[0]:void 0)||e.target;r&&"A"!==r.nodeName;)r=r.parentNode;if(!(!r||0!==e.button||e.metaKey||e.altKey||e.ctrlKey||e.shiftKey||"_blank"===r.target||r.origin!==location.origin||r.getAttribute("href").startsWith("#")))return e.preventDefault(),J._.push(r.href)}),addEventListener("popstate",({state:e})=>{var r;return({style:r}=ee.body),r.minHeight=`${null!=e?e.height:void 0}px`,oe(location),J._({}),setTimeout(()=>X.render(()=>r.minHeight=""),1e3)})}),oe=(e=>{var r,t,n,a,l,o,u,i,s,f,c,h;if(({href:t,pathname:i,search:c,hash:r,query:s}=e),z=t,!s)for(s={},n=a=0,o=(f=c.slice(1).split("&")).length;a<o;n=++a)u=f[n],[l,h]=u.split("="),s[l]=h;le(te(J.routes),i),G={...G,pathname:i,search:c,query:s,hash:r}}),te=(e=>{var r;return(r=re.get(e))||re.set(e,r=ae(e)),r}),le=((e,r)=>{var t;return t=r.split("/"),ie({},e,t,1,$)}),ie=((e,r,t,n,a)=>{var l,o,u,i;a=r[R]||a,(u=t[n])?(i=r[u])?ie(e,i,t,n+1,a):(o=r[I])?o(e,r,t,n,()=>a(e,r,t,n)):a(e,r,t,n):(l=r[B])?(G={param:e},Y=l):a(e,r,t,n)}),ae=(e=>{var r,t,n,a,l;for(r in a={},e)l=e[r],t=0,null==(n=r.split("/"))[1]||n[0]||(t=1),"object"==typeof l?Object.assign(ne(a,n,t),te(l)):ne(a,n,t,l);return a}),ne=((e,r,t,n)=>{var a,l,o,u;return(u=r[t])?58===(a=u.charCodeAt(0))?(l=u.slice(1),o=e[I]||(e[I]=((e,r,t,n,a)=>{a=r[R]||a,(e={...e})[l]=t[n],ie(e,o,t,n+1,a)})),ne(o,r,t+1,n)):42===a?(e[R]=((e,r,t,a)=>{var l;l=t.slice(a),G={param:e,wild:l},Y=n}),e):ne(e[u]||(e[u]={}),r,t+1,n):(n&&(e[B]=n),e)});var ye=ve=((e,l,o=["next","catch","then","finally","render"],u="frame")=>{var i,s,f,c,h,d;return c=[],h=o.map(()=>[]),i=r(e)(n),f=a(l)(()=>{var e;return(e=i())(c),setTimeout(()=>h.forEach(e))}),s=t(f),(d={})[u]=s(c),o.forEach((e,r)=>d[e]=s(h[r])),d})(Date.now,requestAnimationFrame),me=(e=>r=>t=>{var n;return n=new WeakMap,a=>{var l,o,u,i,s,f,c,h;return(f=a&&a.mkey)&&(l=n.get(f))?l:(s=null,o=null,u=!1,i=v(r,a),i=p(i,e.render,e=>{i=e,u||c(),u=!1}),c=(()=>{var e;({patch:e}=s),(s=t(i)).patch=e,e(s)}),h=(()=>{var e;(e=(s=t(i))[1]||(s[1]={})).attachShadow||(e.attachShadow={mode:"open"})}),(l=(e=>{var r;if(s){if(e!==o)for(r in e)if(e[r]!==i[r]){i=i._(o=e),u=!0,h();break}}else i=Object.assign(i._(),o=e),h();return s}))._=i._,f&&n.set(f,l),l)}})(ve),be=(e=>r=>{var t,n,a,l;return N=e,a=null,n=null,(t=r.children[0])&&(a=W(t)),l=(()=>{t=V(r,t,n,a),a=n}),(e,r)=>{n=e(r),w?(l(),w=!1):N.render(l)}})(ve);he=pe(ve);var ge=de=y,Ee=h,ke=fe=(e=>r=>t=>{var n;return e._||(e._={}),n=de(e,ve.finally,e=>t(r,e)),t(r,n),n}),_e=e=>fe(e)(he),Ae=ce=H,Se=ce.use,we=e=>{var r,t,n;for(t in n={},e)r=e[t],n[t]=(e=>{var t;return t=e&&e.mkey,r(t&&{mkey:t})(e)});return use(n)},Ne={sync:ye,Component:me,mount:be,statue:ge,evolve:Ee,app:ke,route:_e,h:Ae,use:Se,reuse:we};e.Component=me,e.app=ke,e.default=Ne,e.evolve=Ee,e.h=Ae,e.mount=be,e.reuse=we,e.route=_e,e.statue=ge,e.sync=ye,e.use=Se,Object.defineProperty(e,"__esModule",{value:!0})});
//# sourceMappingURL=playframe.min.js.map
